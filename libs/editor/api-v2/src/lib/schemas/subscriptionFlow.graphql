query SubscriptionFlows($defaultFlowOnly: Boolean!) {
  SubscriptionFlows(defaultFlowOnly: $defaultFlowOnly) {
    ...SubscriptionFlow
  }
}

mutation CreateSubscriptionFlow($subscriptionFlow: SubscriptionFlowModelCreateInput!) {
  createSubscriptionFlow(subscriptionFlow: $subscriptionFlow) {
    ...SubscriptionFlow
  }
}

mutation UpdateSubscriptionFlow($subscriptionFlow: SubscriptionFlowModelUpdateInput!) {
  updateSubscriptionFlow(subscriptionFlow: $subscriptionFlow) {
    ...SubscriptionFlow
  }
}

mutation UpdateSubscriptionInterval($subscriptionInterval: SubscriptionIntervalUpdateInput!) {
  updateSubscriptionInterval(subscriptionInterval: $subscriptionInterval) {
    ...SubscriptionFlow
  }
}

mutation DeleteSubscriptionFlow($subscriptionFlowId: Int!) {
  deleteSubscriptionFlow(subscriptionFlowId: $subscriptionFlowId) {
    ...SubscriptionFlow
  }
}

fragment SubscriptionFlow on SubscriptionFlowModel {
  id
  default
  additionalIntervals {
    ...SubscriptionInterval
  }
  autoRenewal
  deactivationByUserMailTemplate {
    ...MailTemplateRef
  }
  deactivationUnpaidMailTemplate {
    ...SubscriptionInterval
  }
  invoiceCreationMailTemplate {
    ...SubscriptionInterval
  }
  memberPlan {
    ...MemberPlanRef
  }
  paymentMethods {
    ...PaymentMethodRef
  }
  periodicities
  reactivationMailTemplate {
    ...MailTemplateRef
  }
  renewalFailedMailTemplate {
    ...MailTemplateRef
  }
  renewalSuccessMailTemplate {
    ...MailTemplateRef
  }
  subscribeMailTemplate {
    ...MailTemplateRef
  }
}


fragment SubscriptionInterval on SubscriptionInterval {
  id
  daysAwayFromEnding
  mailTemplate {
    ...MailTemplateRef
  }
}

fragment MailTemplateRef on MailTemplateRef {
  id
  name
}

fragment MemberPlanRef on MemberPlanRef {
  id
  name
}

fragment PaymentMethodRef on PaymentMethodRef {
  id
  name
}


